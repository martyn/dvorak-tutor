html
  head
    script
      //var tutor = new Tutor();
    script(src='http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js', type='text/javascript')
    script(src='tutor.js', type='text/javascript')
    link(rel='stylesheet', href='tutor.css') 
    script
      function getOS() {
        var OSName="Unknown OS";
        if (navigator.appVersion.indexOf("Win")!==-1) OSName="Windows";
        if (navigator.appVersion.indexOf("Mac")!==-1) OSName="Mac";
        if (navigator.appVersion.indexOf("X11")!==-1) OSName="Unix";
        if (navigator.appVersion.indexOf("Linux")!==-1) OSName="Linux";
        return OSName;
      }
      function getKeyboardLayout() {
        var keyboardLayout = "Standard US";
        return keyboardLayout;
      }
      $(document).ready(function() {
        var os = getOS();
        var keyboardLayout = getKeyboardLayout();
        var $keyMap = {};
        var self = this;
        var tutor = new Tutor();
        $('.key .main, .key .alt').each(function() {
          var text = $(this).text();
          $keyMap[text]=$(this).parent();
          $keyMap[text.toUpperCase()]=$(this).parent();
        });
        $("#os-label").text(os);
        $("#keyboard-layout").text(keyboardLayout);
        $(document).bind("keydown", function(evt) {
          var charCode = String.fromCharCode(evt.keyCode);
          tutor.charPressed(charCode);
          if($keyMap[charCode])
            $keyMap[charCode].addClass("pressed");
        });
        $(document).bind("keyup", function(evt) {
          var charCode = String.fromCharCode(evt.keyCode);
          if($keyMap[charCode])
            $keyMap[charCode].removeClass("pressed");
        });
        tutor.rearrangeQwertyToDvorak($keyMap);
        tutor.start($("canvas.main"))
      });
  body
    canvas.main
    #keyboard
      .keyrow.toprow
        .key
          .main esc
        .key
          .main F1
        .key
          .main F2
        .key
          .main F3
        .key
          .main F4
        .key
          .main F5
        .key
          .main F6

        .key
          .main F7
        .key
          .main F8
        .key
          .main F9
        .key
          .main F10
        .key
          .main F11
        .key
          .main F12

      .keyrow.numberrow
        .key
          .alt ~
          .main `
        .key
          .alt !
          .main 1
        .key
          .alt @
          .main 2
        .key
          .alt #
          .main 3

        .key
          .alt $
          .main 4
        .key
          .alt %
          .main 5
        .key
          .alt ^
          .main 6
        .key
          .alt &
          .main 7

        .key
          .alt *
          .main 8
        .key
          .alt (
          .main 9
        .key
          .alt )
          .main 0
        .key
          .alt _
          .main -

        .key
          .alt +
          .main =
        .key.delete
          .alt delete
          .main backspace

      .keyrow.tabrow
        .key.tab
          .main tab
        .key
          .main Q
        .key
          .main W
        .key
          .main E
        .key
          .main R
        .key
          .main T
        .key
          .main Y

        .key
          .main U

        .key
          .main I
        .key
          .main O
        .key
          .main P
        .key
          .alt {
          .main [
        .key
          .alt }
          .main ]
        .key
          .alt |
          .main \\

      .keyrow.capslockrow
        .key.capslock
          .main caps lock
        .key
          .main A
        .key
          .main S
        .key
          .main D
        .key
          .main F
        .key
          .main G
        .key
          .main H

        .key
          .main J

        .key
          .main K
        .key
          .main L
        .key
          .alt :
          .main ;

        .key
          .alt "
          .main '

        .key.enter
          .alt enter
          .main return

      .keyrow.shiftrow
        .key.shift
          .main shift
        .key
          .main Z
        .key
          .main X
        .key
          .main C
        .key
          .main V
        .key
          .main B
        .key
          .main N

        .key
          .main M

        .key
          .alt \<
          .main ,
        .key
          .alt \>
          .main .
        .key
          .alt ?
          .main /
        .key.shift
          .main shift

      .keyrow.spacerow
        .key.ctrl
          .main ctrl
        .key.alt
          .main alt
        .key.space
          .main space
        .key.ralt
          .main alt
        .key.rctrl
          .main ctrl

    //script(src='./3rdparty/dvorakator/build/final.js', type='text/javascript')
